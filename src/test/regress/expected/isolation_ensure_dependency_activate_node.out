Parsed test spec with 2 sessions

starting permutation: s1-print-distributed-objects s1-begin s1-add-worker s2-public-schema s2-create-table s1-commit s2-print-distributed-objects
nodename       nodeport       isactive       

localhost      57637          t              
step s1-print-distributed-objects: 
    SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

    SELECT master_remove_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
step s1-begin: 
    BEGIN;

step s1-add-worker: 
	SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
step s2-public-schema: 
    SET search_path TO public;

step s2-create-table: 
	CREATE TABLE t1 (a int, b int);
    -- session needs to have replication factor set to 1, can't do in setup
	SET citus.shard_replication_factor TO 1;
	SELECT create_distributed_table('t1', 'a');
 <waiting ...>
step s1-commit: 
    COMMIT;

step s2-create-table: <... completed>
create_distributed_table

               
step s2-print-distributed-objects: 
    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
               

starting permutation: s1-print-distributed-objects s1-begin s2-begin s1-add-worker s2-public-schema s2-create-table s1-commit s2-commit s2-print-distributed-objects
nodename       nodeport       isactive       

localhost      57637          t              
step s1-print-distributed-objects: 
    SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

    SELECT master_remove_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
step s1-begin: 
    BEGIN;

step s2-begin: 
	BEGIN;

step s1-add-worker: 
	SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
step s2-public-schema: 
    SET search_path TO public;

step s2-create-table: 
	CREATE TABLE t1 (a int, b int);
    -- session needs to have replication factor set to 1, can't do in setup
	SET citus.shard_replication_factor TO 1;
	SELECT create_distributed_table('t1', 'a');
 <waiting ...>
step s1-commit: 
    COMMIT;

step s2-create-table: <... completed>
create_distributed_table

               
step s2-commit: 
	COMMIT;

step s2-print-distributed-objects: 
    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
               

starting permutation: s1-print-distributed-objects s1-begin s2-begin s2-public-schema s2-create-table s1-add-worker s2-commit s1-commit s2-print-distributed-objects
nodename       nodeport       isactive       

localhost      57637          t              
step s1-print-distributed-objects: 
    SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

    SELECT master_remove_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
step s1-begin: 
    BEGIN;

step s2-begin: 
	BEGIN;

step s2-public-schema: 
    SET search_path TO public;

step s2-create-table: 
	CREATE TABLE t1 (a int, b int);
    -- session needs to have replication factor set to 1, can't do in setup
	SET citus.shard_replication_factor TO 1;
	SELECT create_distributed_table('t1', 'a');

create_distributed_table

               
step s1-add-worker: 
	SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);
 <waiting ...>
step s2-commit: 
	COMMIT;

step s1-add-worker: <... completed>
nodename       nodeport       isactive       

localhost      57638          t              
step s1-commit: 
    COMMIT;

step s2-print-distributed-objects: 
    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
               

starting permutation: s1-print-distributed-objects s1-begin s1-add-worker s2-create-schema s2-create-table s1-commit s2-print-distributed-objects
nodename       nodeport       isactive       

localhost      57637          t              
step s1-print-distributed-objects: 
    SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

    SELECT master_remove_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
step s1-begin: 
    BEGIN;

step s1-add-worker: 
	SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
step s2-create-schema: 
    CREATE SCHEMA myschema;
    SET search_path TO myschema;

step s2-create-table: 
	CREATE TABLE t1 (a int, b int);
    -- session needs to have replication factor set to 1, can't do in setup
	SET citus.shard_replication_factor TO 1;
	SELECT create_distributed_table('t1', 'a');
 <waiting ...>
step s1-commit: 
    COMMIT;

step s2-create-table: <... completed>
create_distributed_table

               
step s2-print-distributed-objects: 
    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

count          

1              
run_command_on_workers

(localhost,57637,t,1)
(localhost,57638,t,1)
master_remove_node

               
               

starting permutation: s1-print-distributed-objects s1-begin s2-begin s1-add-worker s2-create-schema s2-create-table s1-commit s2-commit s2-print-distributed-objects
nodename       nodeport       isactive       

localhost      57637          t              
step s1-print-distributed-objects: 
    SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

    SELECT master_remove_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
step s1-begin: 
    BEGIN;

step s2-begin: 
	BEGIN;

step s1-add-worker: 
	SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
step s2-create-schema: 
    CREATE SCHEMA myschema;
    SET search_path TO myschema;

step s2-create-table: 
	CREATE TABLE t1 (a int, b int);
    -- session needs to have replication factor set to 1, can't do in setup
	SET citus.shard_replication_factor TO 1;
	SELECT create_distributed_table('t1', 'a');
 <waiting ...>
step s1-commit: 
    COMMIT;

step s2-create-table: <... completed>
create_distributed_table

               
step s2-commit: 
	COMMIT;

step s2-print-distributed-objects: 
    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

count          

1              
run_command_on_workers

(localhost,57637,t,1)
(localhost,57638,t,1)
master_remove_node

               
               

starting permutation: s1-print-distributed-objects s1-begin s2-begin s2-create-schema s2-create-table s1-add-worker s2-commit s1-commit s2-print-distributed-objects
nodename       nodeport       isactive       

localhost      57637          t              
step s1-print-distributed-objects: 
    SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);

    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

    SELECT master_remove_node('localhost', 57638);

nodename       nodeport       isactive       

localhost      57638          t              
count          

0              
run_command_on_workers

(localhost,57637,t,0)
(localhost,57638,t,0)
master_remove_node

               
step s1-begin: 
    BEGIN;

step s2-begin: 
	BEGIN;

step s2-create-schema: 
    CREATE SCHEMA myschema;
    SET search_path TO myschema;

step s2-create-table: 
	CREATE TABLE t1 (a int, b int);
    -- session needs to have replication factor set to 1, can't do in setup
	SET citus.shard_replication_factor TO 1;
	SELECT create_distributed_table('t1', 'a');

create_distributed_table

               
step s1-add-worker: 
	SELECT nodename, nodeport, isactive FROM master_add_node('localhost', 57638);
 <waiting ...>
step s2-commit: 
	COMMIT;

step s1-add-worker: <... completed>
nodename       nodeport       isactive       

localhost      57638          t              
step s1-commit: 
    COMMIT;

step s2-print-distributed-objects: 
    -- print if the schema has been created
    SELECT count(*) FROM pg_namespace where nspname = 'myschema';
    SELECT run_command_on_workers($$SELECT count(*) FROM pg_namespace where nspname = 'myschema';$$);

count          

1              
run_command_on_workers

(localhost,57637,t,1)
(localhost,57638,t,1)
master_remove_node

               
               
